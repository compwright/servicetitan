openapi: 3.0.1
info:
  title: Marketing Ads
  version: '1.0'
servers:
  - url: https://api-integration.servicetitan.io
paths:
  '/marketingads/v2/tenant/{tenant}/web-booking-attributions':
    post:
      tags:
        - WebBookingAttributions
      summary: Attributes a web booking to a web session.
      description: Attributes a web booking to a web session.
      operationId: WebBookingAttributions_Create
      parameters:
        - name: tenant
          in: path
          description: Tenant ID
          required: true
          schema:
            type: integer
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Marketing.Ads.V2.CreateWebBookingAttributionRequest'
            example:
              bookingId: 0
              webSessionData:
                landingPageUrl: string
                referrerUrl: string
                gclid: string
                fbclid: string
                msclkid: string
                utmSource: string
                utmMedium: string
                utmCampaign: string
                utmAdgroup: string
                utmTerm: string
                utmContent: string
                googleAnalyticsClientId: string
      responses:
        '200':
          description: The request has succeeded
        '400':
          description: 'The request cannot be processed, check validation errors or request format'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponse'
              example:
                type: string
                title: string
                status: 0
                traceId: string
                errors: { }
                data: { }
components:
  schemas:
    ApiErrorResponse:
      required:
        - type
        - title
        - status
        - traceId
        - errors
        - data
      type: object
      properties:
        type:
          type: string
          description: A URI reference that identifies the problem type
        title:
          type: string
          description: 'A short, human-readable summary of the problem type'
        status:
          type: integer
          description: The HTTP status code generated by server
          format: int32
        traceId:
          type: string
          description: Internal trace ID for advanced diagnostics
        errors:
          type: object
          additionalProperties:
            type: array
            items:
              type: string
          description: 'Provides more details about errors occurred, which can potentially be used for visual display'
        data:
          type: object
          additionalProperties: { }
          description: 'Provides additional data, intended for programmatical usage'
      additionalProperties: false
      description: 'Detailed error response, following RFC 7807 recommendations (https://tools.ietf.org/html/rfc7807).'
    Marketing.Ads.V2.CreateWebBookingAttributionRequest:
      required:
        - bookingId
        - webSessionData
      type: object
      properties:
        bookingId:
          type: integer
          description: The id of the booking entity in ServiceTitan.
          format: int64
        webSessionData:
          oneOf:
            - $ref: '#/components/schemas/Marketing.Ads.V2.WebSessionData'
          description: The web session that the booking should be attributed to
      additionalProperties: false
    Marketing.Ads.V2.WebSessionData:
      required:
        - landingPageUrl
        - referrerUrl
      type: object
      properties:
        landingPageUrl:
          type: string
          description: The url of the web page that the user first landed on
        referrerUrl:
          type: string
          description: The url of the web page that referred to the website
        gclid:
          type: string
          description: Google Click Identifier
          nullable: true
        fbclid:
          type: string
          description: Facebook Click Identifier
          nullable: true
        msclkid:
          type: string
          description: Microsoft Click ID
          nullable: true
        utmSource:
          type: string
          description: UTM source
          nullable: true
        utmMedium:
          type: string
          description: UTM medium
          nullable: true
        utmCampaign:
          type: string
          description: UTM campaign
          nullable: true
        utmAdgroup:
          type: string
          description: UTM ad group
          nullable: true
        utmTerm:
          type: string
          description: UTM term
          nullable: true
        utmContent:
          type: string
          description: UTM content
          nullable: true
        googleAnalyticsClientId:
          type: string
          description: An id used by Google Analytics to track unique visitors
          nullable: true
      additionalProperties: false
      description: "Data from the web session used by the attribution system to determine the marketing campaign that\nled the user to this particular web session."
  securitySchemes:
    apiKeyHeader:
      type: apiKey
      name: ST-App-Key
      in: header
    apiKeyQuery:
      type: apiKey
      name: servicetitanapplicationkey
      in: query
security:
  - apiKeyHeader: [ ]
  - apiKeyQuery: [ ]